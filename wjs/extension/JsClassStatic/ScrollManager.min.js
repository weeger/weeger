// @require JsClassStatic > MousePositionListener
(function(f){f.register("JsClassStatic","ScrollManager",{scrollX:null,scrollY:null,scrollSpeedX:!1,scrollSpeedY:!1,mouseDriftListeners:[],__construct:function(){this.windowScrollBind=this.windowScroll.bind(this);this.windowResizeBind=this.windowResize.bind(this);this.wjs.window.addEventListener("scroll",this.windowScrollBind);this.wjs.window.addEventListener("resize",this.windowResizeBind);this.mouseWheelX=function(a){this.wjs.window.scrollTo(this.wjs.ScrollManager.scrollX+a.deltaY,this.wjs.ScrollManager.scrollY)}.bind(this);
this.mouseMoveDriftOverBind=this.mouseMoveDriftOver.bind(this);this.mouseMoveDriftIntervalBind=this.mouseMoveDriftInterval.bind(this)},__destruct:function(){this.wjs.window.removeEventListener("scroll",this.windowScrollBind);this.wjs.window.removeEventListener("resize",this.windowResizeBind)},scrollEnable:function(a,b){var c="domScroll"+a;if(!this[c]){var e=this.wjs.document.createElement("div"),d=e.style;this.wjs.document.body.appendChild(e);d.position="absolute";d.visibility="hidden";d.top=d.left=
"0";this[c]=e}this.scrollParam(a,b);this.scrollRefresh(a)},scrollDisable:function(a){a="domScroll"+a;this[a]&&(this[a].parentNode.removeChild(this[a]),delete this[a])},scrollParam:function(a,b){this["scrollSpeed"+a]=b;this.scrollRefresh(a)},scrollRefresh:function(a){var b=this["domScroll"+a].style;b["X"===a?"width":"height"]=this.wjs.window.innerWidth*this["scrollSpeed"+a]+"px";b["X"===a?"height":"width"]="1px"},scrollGet:function(a){a="scroll"+a;return this.wjs.document.body[a]||this.wjs.document.documentElement[a]},
mouseWheelEnable:function(a){"X"===a&&this.wjs.window.addEventListener("mousewheel",this.mouseWheelX)},mouseWheelDisable:function(a){"X"===a&&this.wjs.window.removeEventListener("mousewheel",this.mouseWheelX)},mouseDriftEnable:function(a,b,c){this.mouseDriftListeners.length||this.wjs.window.addEventListener("mouseover",this.mouseMoveDriftOverBind);this.mouseDriftListeners.push({direction:a,limit:b,callback:c})},mouseMoveDriftOver:function(a){a.target.addEventListener("mouseout",this.mouseMoveDriftOut.bind(this));
this.mouseMoveDriftTe=this.wjs.window.setTimeout(this.mouseMoveDriftIntervalBind,30)},mouseMoveDriftOut:function(){this.wjs.window.clearInterval(this.mouseMoveDriftTe)},mouseMoveDriftInterval:function(){for(var a=0,b,c;c=this.mouseDriftListeners[a++];)b=this.wjs.MousePositionListener["client"+c.direction],(b<c.limit||b>this.wjs.window["inner"+("X"===c.direction?"Width":"Height")]-c.limit)&&c.callback(b);this.mouseMoveDriftTe=this.wjs.window.setTimeout(this.mouseMoveDriftIntervalBind,30)},mouseDriftDisable:function(a){for(var b=
0,c;c=this.mouseDriftListeners[b++];)c.callback===a&&this.wjs.arrayDeleteItem(this.mouseDriftListeners,c);this.mouseDriftListeners.length||this.wjs.window.removeEventListener("mouseover",this.mouseMoveDriftOverBind)},windowResize:function(){this.domScrollX&&this.scrollRefresh("X");this.domScrollY&&this.scrollRefresh("Y")},windowScroll:function(){this.scrollX=this.scrollGet("Left");this.scrollXPercent=this.scrollX/this.wjs.window.innerWidth;this.scrollY=this.scrollGet("Top");this.scrollYPercent=this.scrollY/
this.wjs.window.innerHeight;f.trigger("ScrollManagerChange",[this])}})})(WjsProto);